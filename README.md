# API文档

## 通用HTTP状态码解释

**405** 使用的HTTP方法不正确

**500** 服务器出错，联系我

**401** 未鉴权，检查表单是否有authorization项



## 用户

### 注册POST /users

**POST表单**

| 表单项      | 数据类型           | 示例                                 |
| -------- | -------------- | ---------------------------------- |
| username | string(64)     | "test"                             |
| password | string(32)-MD5 | "34819d7beeabb9260a5c854bc85b3e44" |
| email    | string(64)     | "test@test.email"                  |

**响应**

| 响应码  | 解释     | json内容                                   |
| ---- | ------ | ---------------------------------------- |
| 200  | 注册成功   | {}                                       |
| 400  | 某项输入太长 | {<br />"reason": "...",<br />"tags": ["username", ...]} |
| 409  | 用户名已存在 | {<br />"reason":"..."}                   |

### 登陆、鉴权GET /user/login

**POST表单**

| 表单项      | 数据类型           | 示例                                 |
| -------- | -------------- | ---------------------------------- |
| username | string(64)     | "test"                             |
| password | string(32)-MD5 | "34819d7beeabb9260a5c854bc85b3e44' |

**响应**

| 响应码  | 解释           | json内容                                   |
| ---- | ------------ | ---------------------------------------- |
| 200  | 登陆成功，返回身份识别码 | {"authorization":"26be104b-1544-3a1d-bbda-76d5b32be521"} |
| 400  | 用户名或密码错误     | {"reason":"..."}                         |

### 初始个人信息POST /users/info

**POST表单**

| 表单项           | 数据类型       | 示例                                     |
| ------------- | ---------- | -------------------------------------- |
| authorization | string256  | “26be104b-1544-3a1d-bbda-76d5b32be521” |
| nickname      | string(64) | "petty"                                |
| sex           | string(8)  | "male" / "female"                      |
| age           | integer    | 18                                     |
| college       | string(64) | "陕西师范大学"                               |

**响应**

| 响应码  | 解释     | json内容                                   |
| ---- | ------ | ---------------------------------------- |
| 200  | 初始化成功  | {}                                       |
| 400  | 信息已经存在 | {"reason":"The user's info already exist"} |

### 更改个人信息PUT /users/info

**PUT表单**

| 表单项（可选项）      | 数据类型       | 示例                                     |
| ------------- | ---------- | -------------------------------------- |
| authorization | string(32) | “26be104b-1544-3a1d-bbda-76d5b32be521” |
| sex           | string     | "male" / "female"                      |
| college       | string(64) | "Xidian University"                    |
| 同上...         | ...        | ...                                    |

**响应**

| 响应码  | 解释                  | json内容                               |
| ---- | ------------------- | ------------------------------------ |
| 200  | 修改成功，返回被修改的字段名      | {"changed":["age", "sex"......]}     |
| 400  | 修改失败，某些项不合法，返回不合法的项 | {"not_allowed":["age", "sex"]......} |

### 获取个人信息 GET /users/info

**GET表单**

| 表单项                  | 数据类型       | 示例                                     |
| -------------------- | ---------- | -------------------------------------- |
| id(可选，不选则为当前登陆用户的id) | int        | 3                                      |
| authorization        | string(32) | “26be104b-1544-3a1d-bbda-76d5b32be521” |

**响应**

| 响应码  | 解释   | json内容                                   |
| ---- | ---- | ---------------------------------------- |
| 200  | 获取成功 | {'sex': 'm', 'user_id': 3, 'nickname': 'jack', 'college': 'ShanShiDa', 'age': 18} |


